<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pixel Creature Eating Animation</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: transparent; /* keep background transparent */
      height: 100%;
    }
    body {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    svg {
      width: 320px;
      height: 320px;
    }
  </style>
</head>
<body>
  <!-- Inline SVG; same size / viewBox as your original -->
  <svg id="creature-svg"
       xmlns="http://www.w3.org/2000/svg"
       width="320" height="320"
       viewBox="0 0 320 320"
       shape-rendering="crispEdges">

    <!-- Wrap everything in a group so we can scale it -->
    <g id="creature">
      <!--
        BEGIN: your original minecraft_simplified.svg content.
        Paste ALL your original <rect ... /> elements here, unchanged.
        Example:
          <rect x="80" y="40" width="10" height="10" fill="#172b53" />
          ...
      -->

      <!-- ... PASTE ORIGINAL RECTANGLES HERE ... -->

      <!--
        END: original content.

        Below are two extra pixels in the same color and grid
        that we animate to "close" the mouth and eye.

        MOUTH:
        - The mouth gap in your sprite is along grid x = 26
          for y = 13..20 (so 8 tiles tall).
        - That corresponds to x = 260, y = 130, height = 80.
      -->
      <rect id="mouth-fill"
            x="260" y="130"
            width="10" height="80"
            fill="#172b53" />

      <!--
        EYE:
        - The eye gap is at grid x = 24 for y = 11..12
          (2 tiles tall).
        - That corresponds to x = 240, y = 110, height = 20.
      -->
      <rect id="eye-fill"
            x="240" y="110"
            width="10" height="20"
            fill="#172b53" />
    </g>
  </svg>

  <script>
    (function () {
      const creature = document.getElementById('creature');
      const mouth   = document.getElementById('mouth-fill');
      const eye     = document.getElementById('eye-fill');

      // Constants derived from your pixel grid (10x10 tiles)
      const mouthMaxHeight = 80;      // full gap height (8 tiles)
      const mouthBottomY   = 130 + 80; // y = 210 (bottom of gap)

      const eyeMaxHeight = 20;        // 2 tiles
      const eyeBaseY     = 110;       // center around here

      let start = null;

      function frame(timestamp) {
        if (!start) start = timestamp;
        const t = (timestamp - start) / 1000; // seconds

        // --- 1) Grow/shrink (gentle pulse) ---
        const baseScale = 1.0;
        const pulse     = 0.08 * Math.sin(t * 2.0); // +/-8% scale
        const scale     = baseScale + pulse;

        // Scale around center of the viewBox (160, 160)
        const cx = 160;
        const cy = 160;
        creature.setAttribute(
          'transform',
          `translate(${cx} ${cy}) scale(${scale}) translate(${-cx} ${-cy})`
        );

        // --- 2) Mouth: chomp motion (open/close) ---
        // mouthPhase: 0 (closed) -> 1 (fully open) -> 0 ...
        const mouthPhase   = (Math.sin(t * 4.0) + 1) / 2; // faster than body
        const mouthHeight  = mouthMaxHeight * (1 - mouthPhase);
        const mouthTopY    = mouthBottomY - mouthHeight;

        mouth.setAttribute('height', mouthHeight.toString());
        mouth.setAttribute('y', mouthTopY.toString());

        // --- 3) Eye: blinking ---
        // Blink roughly every 3 seconds, quick close/open
        const blinkCycle = 3.0;
        const blinkPos   = t % blinkCycle;
        let eyeOpenFactor;

        if (blinkPos < 0.1) {
          // Closing (1 -> 0)
          eyeOpenFactor = 1 - (blinkPos / 0.1);
        } else if (blinkPos < 0.2) {
          // Opening (0 -> 1)
          eyeOpenFactor = (blinkPos - 0.1) / 0.1;
        } else {
          // Fully open
          eyeOpenFactor = 1;
        }

        const eyeHeight = eyeMaxHeight * eyeOpenFactor;
        const eyeY      = eyeBaseY + (eyeMaxHeight - eyeHeight) / 2;

        eye.setAttribute('height', eyeHeight.toString());
        eye.setAttribute('y', eyeY.toString());
        eye.setAttribute('visibility', eyeOpenFactor <= 0 ? 'hidden' : 'visible');

        requestAnimationFrame(frame);
      }

      requestAnimationFrame(frame);
    })();
  </script>
</body>
</html>
