<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Had & Požírač – Pixel animace</title>
  <style>
    :root {
      --bg-soft: #eef2ff;
      --bg-mid: #cad5f7;
      --snake-dark: #142749;
      --snake-mid: #1f3b63;
      --snake-light: #8fb9eb;
      --snake-belly: #bed5f2;
      --snake-highlight: #dfeeff;
      --eater-body: #ece4c8;
      --eater-outline: #2b4054;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: linear-gradient(180deg, var(--bg-soft), #a8c0e8);
      font-family: "Press Start 2P", monospace;
      height: 100vh;
      overflow: hidden;
    }

    svg {
      width: 100vw;
      height: 100vh;
      display: block;
      shape-rendering: crispEdges;
      image-rendering: pixelated;
    }

    .pixel {
      shape-rendering: crispEdges;
    }
  </style>
</head>
<body>
  <svg id="scene" viewBox="0 0 1920 1080" preserveAspectRatio="xMidYMid slice">
    <defs>
      <clipPath id="snakeClip">
        <rect id="snakeClipRect" x="48" y="380" width="1824" height="320"></rect>
      </clipPath>
    </defs>

    <rect width="1920" height="1080" fill="var(--bg-soft)"></rect>

    <!-- Had -->
    <g id="snake" clip-path="url(#snakeClip)" class="pixel">
      <rect x="48" y="492" width="1536" height="96" fill="var(--snake-mid)"></rect>
      <rect x="48" y="508" width="1536" height="64" fill="var(--snake-dark)"></rect>
      <rect x="48" y="524" width="1536" height="32" fill="var(--snake-belly)"></rect>
      <g id="snakePattern"></g>

      <g id="snakeHead">
        <rect x="1584" y="468" width="224" height="144" fill="var(--snake-dark)"></rect>
        <rect x="1600" y="484" width="192" height="112" fill="var(--snake-highlight)"></rect>
        <rect x="1600" y="540" width="192" height="32" fill="var(--snake-light)"></rect>
        <rect x="1632" y="508" width="32" height="80" fill="var(--snake-light)"></rect>
        <rect x="1792" y="508" width="16" height="80" fill="var(--snake-light)"></rect>
        <rect id="snakeEye" x="1704" y="516" width="32" height="32" fill="var(--snake-dark)"></rect>
        <rect x="1712" y="524" width="12" height="12" fill="#ffffff"></rect>
      </g>
    </g>

    <!-- Požírač - věrný pixel art -->
    <g id="eater" class="pixel">
      <g id="eaterStatic">
        <!-- Pixel art převod z obrázku (16x16 grid, každý pixel = 16 jednotek) -->

        <!-- Řádek 0 (shora) -->
        <rect x="-128" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-96" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-80" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-64" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-48" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-32" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-16" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="0" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="16" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="32" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="48" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="64" y="-128" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 1 -->
        <rect x="-128" y="-112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="-112" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="-112" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 2 -->
        <rect x="-128" y="-96" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="-96" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-80" y="-96" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-64" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="-96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="-96" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="80" y="-96" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 3 -->
        <rect x="-128" y="-80" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="-80" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-80" y="-80" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-64" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="-80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="-80" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 4 -->
        <rect x="-128" y="-64" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="-64" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-80" y="-64" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-64" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="-64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="96" y="-64" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 5 -->
        <rect x="-128" y="-48" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="96" y="-48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="112" y="-48" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 6 (střed) -->
        <rect x="-128" y="-32" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="96" y="-32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="112" y="-32" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 7 -->
        <rect x="-128" y="-16" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="96" y="-16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="112" y="-16" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 8 -->
        <rect x="-128" y="0" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="96" y="0" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="112" y="0" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 9 -->
        <rect x="-128" y="16" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="96" y="16" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="112" y="16" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 10 -->
        <rect x="-128" y="32" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="96" y="32" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="112" y="32" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 11 -->
        <rect x="-128" y="48" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="48" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="96" y="48" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 12 -->
        <rect x="-128" y="64" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="64" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="80" y="64" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 13 -->
        <rect x="-128" y="80" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="80" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="80" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 14 -->
        <rect x="-128" y="96" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-96" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-80" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-64" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-48" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-32" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="-16" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="0" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="16" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="32" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="48" y="96" width="16" height="16" fill="var(--eater-body)"></rect>
        <rect x="64" y="96" width="16" height="16" fill="var(--eater-outline)"></rect>

        <!-- Řádek 15 (spodní) -->
        <rect x="-128" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-112" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-96" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-80" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-64" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-48" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-32" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="-16" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="0" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="16" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="32" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="48" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="64" y="112" width="16" height="16" fill="var(--eater-outline)"></rect>
      </g>

      <!-- Animovaná tlama - horní část -->
      <g id="mouthTop" transform-origin="112 0">
        <rect x="80" y="-96" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="96" y="-80" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="112" y="-64" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="128" y="-48" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="144" y="-32" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="128" y="-32" width="16" height="16" fill="var(--eater-outline)"></rect>
      </g>

      <!-- Animovaná tlama - spodní část -->
      <g id="mouthBottom" transform-origin="112 0">
        <rect x="96" y="64" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="112" y="48" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="128" y="32" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="128" y="16" width="16" height="16" fill="var(--eater-outline)"></rect>
        <rect x="144" y="0" width="16" height="16" fill="var(--eater-outline)"></rect>
      </g>
    </g>

    <rect id="flash" x="0" y="0" width="1920" height="1080" fill="#ffffff" opacity="0"></rect>
    <g id="bits" class="pixel" opacity="0"></g>
  </svg>

  <script>
    const svgNS = "http://www.w3.org/2000/svg";

    // === PARAMETRY ===
    const GRID = 16;
    const VIEW_W = 1920;
    const VIEW_H = 1080;
    const BODY_COLS = 96;
    const HEAD_COLS = 14;
    const TIP_COLS = 4;
    const BODY_LENGTH = GRID * BODY_COLS;
    const HEAD_LENGTH = GRID * HEAD_COLS;
    const TONGUE_LENGTH = GRID * TIP_COLS;
    const SNAKE_LENGTH = BODY_LENGTH + HEAD_LENGTH + TONGUE_LENGTH;
    const SNAKE_HEIGHT = GRID * 6;

    const snakeX = 48;
    const snakeY = VIEW_H / 2;
    const snakeBodyTop = snakeY - SNAKE_HEIGHT / 2;

    const eatDuration = 7000;
    const explosionDuration = 1300;
    const totalDuration = eatDuration + explosionDuration;

    // === DOM ===
    const snakeClipRect = document.getElementById("snakeClipRect");
    const snakePatternGroup = document.getElementById("snakePattern");
    const eater = document.getElementById("eater");
    const mouthTop = document.getElementById("mouthTop");
    const mouthBottom = document.getElementById("mouthBottom");
    const flashRect = document.getElementById("flash");
    const bitsGroup = document.getElementById("bits");

    const eaterStartX = snakeX - GRID * 16;
    const eaterEndX = snakeX + BODY_LENGTH + HEAD_LENGTH - GRID * 8;
    const eaterY = snakeY;

    let startTime = null;
    let explosionStarted = false;
    let bits = [];

    // === FUNKCE ===
    function buildSnakePixels() {
      const rows = SNAKE_HEIGHT / GRID;
      const cols = BODY_COLS;
      for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
          const rect = document.createElementNS(svgNS, "rect");
          rect.setAttribute("x", snakeX + c * GRID);
          rect.setAttribute("y", snakeBodyTop + r * GRID);
          rect.setAttribute("width", GRID);
          rect.setAttribute("height", GRID);

          let color = (c % 8 < 4) ? "#1c3458" : "#24476d";
          if (r === 0) color = "#9ac0ed";
          if (r === rows - 1) color = "#162a4a";
          if ((r + c) % 6 === 0) color = "#2a5685";
          rect.setAttribute("fill", color);
          snakePatternGroup.appendChild(rect);
        }
      }
    }

    function initBits() {
      bitsGroup.innerHTML = "";
      bits = [];
      const colors = ["#f9cc5c", "#f47340", "#92c8ff", "#2b4054"];
      const count = 120;
      for (let i = 0; i < count; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = 200 + Math.random() * 400;
        const size = GRID;
        const el = document.createElementNS(svgNS, "rect");
        el.setAttribute("width", size);
        el.setAttribute("height", size);
        el.setAttribute("fill", colors[Math.floor(Math.random() * colors.length)]);
        bitsGroup.appendChild(el);
        bits.push({ el, angle, speed, size });
      }
    }

    function animateMouth(elapsed) {
      const freq = 4;
      const t = elapsed / 1000;
      const osc = (Math.sin(t * freq * Math.PI * 2) + 1) / 2;

      const minAngle = 5;
      const maxAngle = 20;
      const angle = minAngle + (maxAngle - minAngle) * osc;

      mouthTop.setAttribute("transform", `rotate(${-angle}, 112, 0)`);
      mouthBottom.setAttribute("transform", `rotate(${angle}, 112, 0)`);
    }

    function step(timestamp) {
      if (!startTime) startTime = timestamp;
      let elapsed = timestamp - startTime;

      if (elapsed > totalDuration) {
        startTime = timestamp;
        elapsed = 0;
      }

      if (elapsed <= eatDuration) {
        explosionStarted = false;
        bitsGroup.setAttribute("opacity", 0);
        flashRect.setAttribute("opacity", 0);

        const p = elapsed / eatDuration;
        const newX = snakeX + SNAKE_LENGTH * p;
        const newW = Math.max(SNAKE_LENGTH * (1 - p), 0);
        snakeClipRect.setAttribute("x", newX);
        snakeClipRect.setAttribute("width", newW);

        const eaterX = eaterStartX + (eaterEndX - eaterStartX) * p;
        eater.setAttribute("transform", `translate(${eaterX}, ${eaterY})`);
        eater.style.opacity = 1;

        animateMouth(elapsed);
      } else {
        const tExpl = elapsed - eatDuration;
        const p = Math.min(tExpl / explosionDuration, 1);

        if (!explosionStarted) {
          explosionStarted = true;
          initBits();
        }

        const scale = 1 + 2 * p;
        eater.setAttribute("transform", `translate(${eaterEndX}, ${eaterY}) scale(${scale})`);
        eater.style.opacity = 1 - p;

        mouthTop.setAttribute("transform", `rotate(-35, 112, 0)`);
        mouthBottom.setAttribute("transform", `rotate(35, 112, 0)`);

        const flash = Math.pow(Math.sin(p * 4 * Math.PI), 2) * (1 - p) * 0.5;
        flashRect.setAttribute("opacity", flash);

        bitsGroup.setAttribute("opacity", 1);
        bits.forEach((b) => {
          const dist = b.speed * p;
          const x = eaterEndX + Math.cos(b.angle) * dist - b.size / 2;
          const y = eaterY + Math.sin(b.angle) * dist - b.size / 2;
          b.el.setAttribute("x", x);
          b.el.setAttribute("y", y);
        });

        snakeClipRect.setAttribute("x", snakeX + SNAKE_LENGTH);
        snakeClipRect.setAttribute("width", 0);
      }

      requestAnimationFrame(step);
    }

    buildSnakePixels();
    requestAnimationFrame(step);
  </script>
</body>
</html>
